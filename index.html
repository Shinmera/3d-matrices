<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta charset="utf-8"> <title>3d-Matrices</title> <meta name="viewport" content="width=device-width"> <meta name="description" content="A utility library implementing 2x2, 3x3, 4x4, and NxN matrix functionality."> <meta name="author" content="Nicolas Hafner &lt;shinmera@tymoon.eu&gt;"> <style type="text/css"> body{
          max-width: 1024px;
          margin: 0 auto 0 auto;
          font-family: sans-serif;
          color: #333333;
          font-size: 14pt;
          padding: 5px;
      }
      body>header{
          display:flex;
          align-items: center;
          justify-content: center;
          flex-direction: column;
          max-width: 100%;
          text-align: center;
      }
      body>header img{
          max-width: 50%;
      }
      img{
          max-width: 100%;
          max-height: 100%;
      }
      code{
          font-family: Consolas, Inconsolata, monospace;
      }
      a{
          text-decoration: none;
          color: #0055AA;
      }
      a img{
          border: none;
      }
      #documentation{
          text-align: justify;
      }
      #documentation pre{
          margin-left: 20px;
          overflow: auto;
      }
      #documentation img{
          margin: 5px;
      }
      #symbol-index>ul{
          list-style: none;
          padding: 0;
      }
      #symbol-index .package>ul{
          list-style: none;
          padding: 0 0 0 10px;
      }
      #symbol-index .package .nicknames{
          font-weight: normal;
      }
      #symbol-index .package h4{
          display: inline-block;
          margin: 0;
      }
      #symbol-index .package article{
          margin: 0 0 15px 0;
      }
      #symbol-index .package article header{
          font-size: 1.2em;
          font-weight: normal;
      }
      #symbol-index .package .name{
          margin-right: 5px;
      }
      #symbol-index .package .docstring{
          margin: 0 0 0 15px;
          white-space: pre-wrap;
          font-size: 12pt;
      }
      @media (max-width: 800px){
          body{font-size: 12pt;}
      } </style> </head> <body> <header> <h1><img alt="3d-matrices" src="3d-matrices-logo.png"></h1> <span class="version">1.0.0</span> <p class="description">A utility library implementing 2x2, 3x3, 4x4, and NxN matrix functionality.</p> </header> <main> <article id="documentation">  <div><h2 id="about_3d-matrices">About 3d-matrices</h2> <p>This is a library implementing common matrix operations, mainly intended as the counterpiece to <a href="https://shinmera.github.io/3d-vectors">3d-vectors</a> and thus being aimed at operations in 3D space. Still, it also implements other common matrix tasks such as LU and QR factorisation, determinant computation, and sub-matrix selection. 2x2, 3x3, and 4x4 matrices are specially treated and often have specifically optimised or inlined variants in the operations to ensure as high a speed as possible. NxM matrices are also available, but will always use a general algorithm in the operations.</p> <p>This library by no means attempts, nor comes in any way close to replacing or imitating things such as BLAS and LIN/LAPACK. The main purpose is to have a library that allows convenient matrix operations in conjunction with the 3d-vectors library. It should be sufficiently fast and accurate for most purposes, but should not be used for serious matrix based calculations. Please use industry-standard packages for that.</p> <h2 id="how_to">How To</h2> <p>Load it through ASDF or Quicklisp and use the package.</p> <pre><code>(ql:quickload :3d-matrices)
(<a href="http://l1sp.org/cl/use-package">use-package</a> :3d-matrices)
</code></pre> <p>All the functions are prefixed with an <code>m</code> or with <code>nm</code> for destructive ops. This should ensure that there are no clashes in names. Now let's look at creating matrices.</p> <pre><code>(<a href="#3D-MATRICES:MAT">mat</a> 1 2 3 4)
(<a href="#3D-MATRICES:MAT2">mat2</a> 1)
(<a href="#3D-MATRICES:MAT2">mat2</a> '(1 2 3 4))
(<a href="#3D-MATRICES:MCOPY">mcopy</a> (<a href="#3D-MATRICES:MAT3">mat3</a>))
(<a href="#3D-MATRICES:MATN">matn</a> 2 3)
(<a href="#3D-MATRICES:MEYE">meye</a> 5)
(<a href="#3D-MATRICES:MUNIFORM">muniform</a> 2 3 1)
(<a href="#3D-MATRICES:MRAND">mrand</a> 10 10)
</code></pre> <p>In order to see the matrix in a more human-readable format, you can use <code><a href="http://l1sp.org/cl/describe">describe</a></code> or <code><a href="#3D-MATRICES:WRITE-MATRIX">write-matrix</a></code> directly:</p> <pre><code>(<a href="http://l1sp.org/cl/describe">describe</a> (<a href="#3D-MATRICES:MEYE">meye</a> 5))
(<a href="#3D-MATRICES:WRITE-MATRIX">write-matrix</a> (<a href="#3D-MATRICES:MAT2">mat2</a>) T)
(<a href="#3D-MATRICES:WRITE-MATRIX">write-matrix</a> (<a href="#3D-MATRICES:MAT2">mat2</a>) T :format :wolfram)
(<a href="#3D-MATRICES:WRITE-MATRIX">write-matrix</a> (<a href="#3D-MATRICES:MAT2">mat2</a>) T :format :array)
</code></pre> <p>Matrices always use <code><a href="http://l1sp.org/cl/float">float</a></code>s. Where sensible, operations will accept <code><a href="http://l1sp.org/cl/real">real</a></code>s as well however. Either <code><a href="http://l1sp.org/cl/single-float">single-float</a></code>s or <code><a href="http://l1sp.org/cl/double-float">double-float</a></code>s are used, depending on the presence of the <code>:3d-vectors-double-floats</code> keyword in <code><a href="http://l1sp.org/cl/*features*">*features*</a></code>. This feature is taken over from the 3d-vectors library to ensure that both of them always agree on the float type.</p> <p>The type <code><a href="#3D-MATRICES:MAT">mat</a></code> includes all subtypes <code><a href="#3D-MATRICES:MAT2">mat2</a></code>, <code><a href="#3D-MATRICES:MAT3">mat3</a></code>, <code><a href="#3D-MATRICES:MAT4">mat4</a></code>, and <code><a href="#3D-MATRICES:MATN">matn</a></code>. Each of them have their own specific accessors that are suffixed with the dimension number. Usually you should be fine with using the generic variants, but if you already know the type you should probably fall back to using the specific one, or use <code><a href="#3D-MATRICES:WITH-FAST-MATREF">with-fast-matref</a></code>.</p> <pre><code>(<a href="#3D-MATRICES:MIREF">miref</a> (<a href="#3D-MATRICES:MEYE">meye</a> 2) 3)
(<a href="#3D-MATRICES:MCREF">mcref</a> (<a href="#3D-MATRICES:MEYE">meye</a> 2) 1 1)
(<a href="#3D-MATRICES:WITH-FAST-MATREF">with-fast-matref</a> (e (<a href="#3D-MATRICES:MAT">mat</a> 2) 2)
  (e 1 1))
</code></pre> <p>Matrices are basically a struct that contains a simple-vector of floats. This means that every single reference must also dereference the array first. This is why, if you have many repeated accesses to an array, you should use <code><a href="#3D-MATRICES:WITH-FAST-MATREF">with-fast-matref</a></code> or do the same manually by first retrieving the backing array with <code><a href="#3D-MATRICES:MARR">marr</a></code>.</p> <p>If you're coming to this library with the intention of using it to do 3D math, you'll most likely be mostly looking for how to create translation, rotation, and scaling matrices. Specific functions exist for this that take care of it for you. They all operate on <code><a href="#3D-MATRICES:MAT4">mat4</a></code>s and take a <code>vec3</code> as argument.</p> <pre><code>(<a href="http://l1sp.org/cl/let">let</a> ((mat (<a href="#3D-MATRICES:MAT4">mat4</a> 1)))
  (<a href="#3D-MATRICES:NMTRANSLATE">nmtranslate</a> mat (3d-vectors:vec 1 2 3))
  (<a href="#3D-MATRICES:NMSCALE">nmscale</a> mat (3d-vectors:vec 1 2 3))
  (<a href="#3D-MATRICES:NMROTATE">nmrotate</a> mat 3d-vectors:+vx+ 90)
  (<a href="#3D-MATRICES:M*">m*</a> mat (vec 1 2 3)))
</code></pre> <p>Aside from translations you'll probably also want to set up a projection and a camera. You can do this, too.</p> <pre><code>(<a href="#3D-MATRICES:MPERSPECTIVE">mperspective</a> 75 (<a href="http://l1sp.org/cl//">/</a> w h) 0.001 10000)       ; Perspective projection
(<a href="#3D-MATRICES:MORTHO">mortho</a> 0 w h 0 0.001 10000)                ; Orthographic projection
(<a href="#3D-MATRICES:NMLOOKAT">nmlookat</a> modelview camera-pos center +vy+) ; Look at the centre
</code></pre> <p>Aside from the basic comparison operators <code><a href="#3D-MATRICES:M=">m=</a></code> <code><a href="#3D-MATRICES:M~=">m~=</a></code> <code><a href="#3D-MATRICES:M/=">m/=</a></code> <code><a href="#3D-MATRICES:M&lt;">m&lt;</a></code> <code><a href="#3D-MATRICES:M&gt;">m&gt;</a></code> <code><a href="#3D-MATRICES:M&lt;=">m&lt;=</a></code> <code><a href="#3D-MATRICES:M&gt;=">m&gt;=</a></code>, and arithmetic operators <code><a href="#3D-MATRICES:M+">m+</a></code> <code><a href="#3D-MATRICES:M-">m-</a></code> <code><a href="#3D-MATRICES:M*">m*</a></code> <code><a href="#3D-MATRICES:M/">m/</a></code> <code><a href="#3D-MATRICES:NM+">nm+</a></code> <code><a href="#3D-MATRICES:NM-">nm-</a></code> <code><a href="#3D-MATRICES:NM*">nm*</a></code> <code><a href="#3D-MATRICES:N*M">n*m</a></code> <code><a href="#3D-MATRICES:NM/">nm/</a></code>, 3d-matrices also includes LU decomposition <code><a href="#3D-MATRICES:MLU">mlu</a></code>, determinant computation <code><a href="#3D-MATRICES:MDET">mdet</a></code>, inversion <code><a href="#3D-MATRICES:MINV">minv</a></code>, transposition <code><a href="#3D-MATRICES:MTRANSPOSE">mtranspose</a></code>, trace calculation <code><a href="#3D-MATRICES:MTRACE">mtrace</a></code>, minors <code><a href="#3D-MATRICES:MMINOR">mminor</a></code>, cofactors <code><a href="#3D-MATRICES:MCOF">mcof</a></code> <code><a href="#3D-MATRICES:MCOFACTOR">mcofactor</a></code>, matrix adjugate <code><a href="#3D-MATRICES:MADJ">madj</a></code>, pivoting <code><a href="#3D-MATRICES:MPIVOT">mpivot</a></code>, norming <code><a href="#3D-MATRICES:M1NORM">m1norm</a></code> <code><a href="#3D-MATRICES:MINORM">minorm</a></code> <code><a href="#3D-MATRICES:M2NORM">m2norm</a></code>, QR decomposition <code><a href="#3D-MATRICES:MQR">mqr</a></code> and eigenvalue calculation <code><a href="#3D-MATRICES:MEIGEN">meigen</a></code>. These should all work &quot;as you expect&quot; and I will thus refrain from showing them off in detail here. Refer to your standard linear algebra textbook to get an understanding of what they do if you don't know already.</p> <p>Finally, There's also some basic operators to do sectioning or restructuring of a matrix.</p> <pre><code>(<a href="#3D-MATRICES:MCOL">mcol</a> (<a href="#3D-MATRICES:MAT">mat</a> 1 2 3 4) 0)
(<a href="#3D-MATRICES:MROW">mrow</a> (<a href="#3D-MATRICES:MAT">mat</a> 1 2 3 4) 0)
(<a href="#3D-MATRICES:MDIAG">mdiag</a> (<a href="#3D-MATRICES:MAT">mat</a> 1 0 0 0 2 0 0 0 3))
(<a href="#3D-MATRICES:MTOP">mtop</a> (<a href="#3D-MATRICES:MAT">mat</a> 1 2 3 4 5 6 7 8 9) 2)
(<a href="#3D-MATRICES:NMSWAP-ROW">nmswap-row</a> (<a href="#3D-MATRICES:MAT">mat</a> 1 2 3 4) 0 1)
</code></pre> <p>And that's pretty much all she wrote. Note that some operations will only work on square or non-singular matrices, and all operations that take multiple operands require them to be of a compatible type. For example, you can only multiply matrices that are of agreeable rows and columns or multiply with a vector that is of the appropriate size.</p> <h2 id="also_see">Also See</h2> <ul> <li><a href="https://shinmera.github.io/3d-vectors">3d-vectors</a></li> </ul> </div>  </article> <article id="copyright">  <h2>Copyright</h2> <span>3d-matrices</span> is licensed under the <span><a href="https://tldrlegal.com/search?q=Artistic">Artistic</a></span> license.  © <span>Nicolas Hafner &lt;shinmera@tymoon.eu&gt;</span> .  This library can be obtained on <a href="https://github.com/Shinmera/3d-matrices">https://github.com/Shinmera/3d-matrices</a>.  </article>  <article id="symbol-index"> <h2>Package Index</h2> <ul><li class="package"> <h3> <a name="3D-MATRICES" href="#3D-MATRICES">3D-MATRICES</a> <span class="nicknames">(ORG.SHIRAKUMO.FLARE.MATRIX)</span> </h3> <ul><li> <a name="3D-MATRICES:MAT2"> </a> <article id="CLASS 3D-MATRICES:MAT2"> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#CLASS%203D-MATRICES%3AMAT2">MAT2</a></code></h4>  </header> <div class="docstring"><pre>The 2x2 matrix type.</pre></div> </article> </li><li> <a name="3D-MATRICES:MAT3"> </a> <article id="CLASS 3D-MATRICES:MAT3"> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#CLASS%203D-MATRICES%3AMAT3">MAT3</a></code></h4>  </header> <div class="docstring"><pre>The 3x3 matrix type.</pre></div> </article> </li><li> <a name="3D-MATRICES:MAT4"> </a> <article id="CLASS 3D-MATRICES:MAT4"> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#CLASS%203D-MATRICES%3AMAT4">MAT4</a></code></h4>  </header> <div class="docstring"><pre>The 4x4 matrix type.</pre></div> </article> </li><li> <a name="3D-MATRICES:MATN"> </a> <article id="CLASS 3D-MATRICES:MATN"> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#CLASS%203D-MATRICES%3AMATN">MATN</a></code></h4>  </header> <div class="docstring"><pre>The NxM matrix type.</pre></div> </article> </li><li> <a name="3D-MATRICES:MAT"> </a> <article id="TYPE 3D-MATRICES:MAT"> <header class="type"> <span class="type">type</span>  <h4 class="name"><code><a href="#TYPE%203D-MATRICES%3AMAT">MAT</a></code></h4>  </header> <div class="docstring"><pre>Supertype for all matrix types.

See <a href="#3D-MATRICES:MAT2">MAT2</a>
See <a href="#3D-MATRICES:MAT3">MAT3</a>
See <a href="#3D-MATRICES:MAT4">MAT4</a>
See <a href="#3D-MATRICES:MATN">MATN</a></pre></div> </article> </li><li> <a name="3D-MATRICES:MARR2"> </a> <article id="ACCESSOR 3D-MATRICES:MARR2"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%203D-MATRICES%3AMARR2">MARR2</a></code></h4> <code class="qualifiers"></code> <code class="arguments">INSTANCE</code><code>)</code>  </header> <div class="docstring"><pre>Direct accessor to the backing array of the MAT2.</pre></div> </article> </li><li> <a name="3D-MATRICES:MARR3"> </a> <article id="ACCESSOR 3D-MATRICES:MARR3"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%203D-MATRICES%3AMARR3">MARR3</a></code></h4> <code class="qualifiers"></code> <code class="arguments">INSTANCE</code><code>)</code>  </header> <div class="docstring"><pre>Direct accessor to the backing array of the MAT3o.</pre></div> </article> </li><li> <a name="3D-MATRICES:MARR4"> </a> <article id="ACCESSOR 3D-MATRICES:MARR4"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%203D-MATRICES%3AMARR4">MARR4</a></code></h4> <code class="qualifiers"></code> <code class="arguments">INSTANCE</code><code>)</code>  </header> <div class="docstring"><pre>Direct accessor to the backing array of the MAT4.</pre></div> </article> </li><li> <a name="3D-MATRICES:MARRN"> </a> <article id="ACCESSOR 3D-MATRICES:MARRN"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%203D-MATRICES%3AMARRN">MARRN</a></code></h4> <code class="qualifiers"></code> <code class="arguments">INSTANCE</code><code>)</code>  </header> <div class="docstring"><pre>Direct accessor to the backing array of the MATN.</pre></div> </article> </li><li> <a name="3D-MATRICES:MCOL"> </a> <article id="ACCESSOR 3D-MATRICES:MCOL"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%203D-MATRICES%3AMCOL">MCOL</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT N</code><code>)</code>  </header> <div class="docstring"><pre>Accesses the requested column as a vector of the appropriate size.

This only works for MAT2, MAT3, MAT4.</pre></div> </article> </li><li> <a name="3D-MATRICES:MROW"> </a> <article id="ACCESSOR 3D-MATRICES:MROW"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%203D-MATRICES%3AMROW">MROW</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT N</code><code>)</code>  </header> <div class="docstring"><pre>Accesses the requested row as a vector of the appropriate size.

This only works for MAT2, MAT3, MAT4.</pre></div> </article> </li><li> <a name="3D-MATRICES:M*"> </a> <article id="FUNCTION 3D-MATRICES:M*"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AM%2A">M*</a></code></h4> <code class="qualifiers"></code> <code class="arguments">VAL &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Computes a matrix multiplication.

If the other operand is a real, the matrix is multiplied with the real element-wise.
If the other operand is a matrix, they are multiplied as per matrix multiplication.
Note that the returned matrix may have different size than the input matrices as a result
of this. The two matrices must agree on the size as per matrix multiplication.</pre></div> </article> </li><li> <a name="3D-MATRICES:M+"> </a> <article id="FUNCTION 3D-MATRICES:M+"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AM%2B">M+</a></code></h4> <code class="qualifiers"></code> <code class="arguments">VAL &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Computes the element-wise addition of the matrices or reals. Returns a fresh matrix.</pre></div> </article> </li><li> <a name="3D-MATRICES:M-"> </a> <article id="FUNCTION 3D-MATRICES:M-"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AM-">M-</a></code></h4> <code class="qualifiers"></code> <code class="arguments">VAL &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Computes the element-wise subtraction of the matrices or reals. Returns a fresh matrix.</pre></div> </article> </li><li> <a name="3D-MATRICES:M/"> </a> <article id="FUNCTION 3D-MATRICES:M/"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AM%2F">M/</a></code></h4> <code class="qualifiers"></code> <code class="arguments">VAL &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Computes an element-wise division of the matrix from a real. Returns a fresh matrix.</pre></div> </article> </li><li> <a name="3D-MATRICES:M/="> </a> <article id="FUNCTION 3D-MATRICES:M/="> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AM%2F%3D">M/=</a></code></h4> <code class="qualifiers"></code> <code class="arguments">VAL &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Compares matrices against each other or a real, returning T if they are element-wise equal by /=.</pre></div> </article> </li><li> <a name="3D-MATRICES:M1NORM"> </a> <article id="FUNCTION 3D-MATRICES:M1NORM"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AM1NORM">M1NORM</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M</code><code>)</code>  </header> <div class="docstring"><pre>Computes the 1 norm of the matrix, namely the maximum of the sums of the columns.</pre></div> </article> </li><li> <a name="3D-MATRICES:M2NORM"> </a> <article id="FUNCTION 3D-MATRICES:M2NORM"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AM2NORM">M2NORM</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M</code><code>)</code>  </header> <div class="docstring"><pre>Computes the 2 norm of the matrix, namely the square root of the sum of all squared elements.</pre></div> </article> </li><li> <a name="3D-MATRICES:M&lt;"> </a> <article id="FUNCTION 3D-MATRICES:M&lt;"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AM%3C">M&lt;</a></code></h4> <code class="qualifiers"></code> <code class="arguments">VAL &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Compares matrices against each other or a real, returning T if they are element-wise ordered by &lt;.</pre></div> </article> </li><li> <a name="3D-MATRICES:M&lt;="> </a> <article id="FUNCTION 3D-MATRICES:M&lt;="> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AM%3C%3D">M&lt;=</a></code></h4> <code class="qualifiers"></code> <code class="arguments">VAL &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Compares matrices against each other or a real, returning T if they are element-wise ordered by &lt;=.</pre></div> </article> </li><li> <a name="3D-MATRICES:M="> </a> <article id="FUNCTION 3D-MATRICES:M="> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AM%3D">M=</a></code></h4> <code class="qualifiers"></code> <code class="arguments">VAL &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Compares matrices against each other or a real, returning T if they are element-wise equal by =.</pre></div> </article> </li><li> <a name="3D-MATRICES:M&gt;"> </a> <article id="FUNCTION 3D-MATRICES:M&gt;"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AM%3E">M&gt;</a></code></h4> <code class="qualifiers"></code> <code class="arguments">VAL &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Compares matrices against each other or a real, returning T if they are element-wise ordered by &gt;.</pre></div> </article> </li><li> <a name="3D-MATRICES:M&gt;="> </a> <article id="FUNCTION 3D-MATRICES:M&gt;="> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AM%3E%3D">M&gt;=</a></code></h4> <code class="qualifiers"></code> <code class="arguments">VAL &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Compares matrices against each other or a real, returning T if they are element-wise ordered by &gt;=.</pre></div> </article> </li><li> <a name="3D-MATRICES:MADJ"> </a> <article id="FUNCTION 3D-MATRICES:MADJ"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMADJ">MADJ</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M</code><code>)</code>  </header> <div class="docstring"><pre>Computes the adjugate of the matrix.

For MAT2 MAT3 MAT4, inlined variants exist. For MATN, an algorithm based on the cofactors is used.</pre></div> </article> </li><li> <a name="3D-MATRICES:MAPPLY"> </a> <article id="FUNCTION 3D-MATRICES:MAPPLY"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMAPPLY">MAPPLY</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT OP</code><code>)</code>  </header> <div class="docstring"><pre>Applies the function to each element of the matrix and maps the result of it to a new matrix.</pre></div> </article> </li><li> <a name="3D-MATRICES:MAPPLYF"> </a> <article id="FUNCTION 3D-MATRICES:MAPPLYF"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMAPPLYF">MAPPLYF</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT OP</code><code>)</code>  </header> <div class="docstring"><pre>Applies the function to each element of the matrix and maps the result of it back into the matrix.</pre></div> </article> </li><li> <a name="3D-MATRICES:MARR"> </a> <article id="FUNCTION 3D-MATRICES:MARR"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMARR">MARR</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT</code><code>)</code>  </header> <div class="docstring"><pre>Returns the backing array used by the matrix.

This should be a SIMPLE-VECTOR with the elements of type FLOAT-TYPE.

See <a href="#3D-MATRICES:MARR2">MARR2</a>
See <a href="#3D-MATRICES:MARR3">MARR3</a>
See <a href="#3D-MATRICES:MARR4">MARR4</a>
See <a href="#3D-MATRICES:MARRN">MARRN</a></pre></div> </article> </li><li> <a name="3D-MATRICES:MAT"> </a> <article id="FUNCTION 3D-MATRICES:MAT"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMAT">MAT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Constructs a fitting matrix for the number of elements given.

This only works for square numbers of elements, as otherwise it is not possible
to guess what dimensions the matrix should have. In the case of a non-square
number, an error is signalled.

See <a href="#3D-MATRICES:MAT2">MAT2</a>
See <a href="#3D-MATRICES:MAT3">MAT3</a>
See <a href="#3D-MATRICES:MAT4">MAT4</a>
See <a href="#3D-MATRICES:MATN">MATN</a></pre></div> </article> </li><li> <a name="3D-MATRICES:MAT-P"> </a> <article id="FUNCTION 3D-MATRICES:MAT-P"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMAT-P">MAT-P</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT</code><code>)</code>  </header> <div class="docstring"><pre>Returns T if the given object is of type MAT.

See <a href="#3D-MATRICES:MAT2-P">MAT2-P</a>
See <a href="#3D-MATRICES:MAT3-P">MAT3-P</a>
See <a href="#3D-MATRICES:MAT4-P">MAT4-P</a>
See <a href="#3D-MATRICES:MATN-P">MATN-P</a></pre></div> </article> </li><li> <a name="3D-MATRICES:MAT2"> </a> <article id="FUNCTION 3D-MATRICES:MAT2"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMAT2">MAT2</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;OPTIONAL ELEMENTS</code><code>)</code>  </header> <div class="docstring"><pre>Constructs a MAT2 from the given elements.

ELEMENTS can be
  NULL     --- The matrix is initialised with zeroes.
  REAL     --- The matrix is initialised with this number.
  SEQUENCE --- The sequence is mapped into the matrix
               and the rest are initialised to 0.</pre></div> </article> </li><li> <a name="3D-MATRICES:MAT2-P"> </a> <article id="FUNCTION 3D-MATRICES:MAT2-P"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMAT2-P">MAT2-P</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <div class="docstring"><pre>Returns T if the given object is of type MAT2.</pre></div> </article> </li><li> <a name="3D-MATRICES:MAT3"> </a> <article id="FUNCTION 3D-MATRICES:MAT3"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMAT3">MAT3</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;OPTIONAL ELEMENTS</code><code>)</code>  </header> <div class="docstring"><pre>Constructs a MAT3 from the given elements.

ELEMENTS can be
  NULL     --- The matrix is initialised with zeroes.
  REAL     --- The matrix is initialised with this number.
  SEQUENCE --- The sequence is mapped into the matrix
               and the rest are initialised to 0.</pre></div> </article> </li><li> <a name="3D-MATRICES:MAT3-P"> </a> <article id="FUNCTION 3D-MATRICES:MAT3-P"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMAT3-P">MAT3-P</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <div class="docstring"><pre>Returns T if the given object is of type MAT3.</pre></div> </article> </li><li> <a name="3D-MATRICES:MAT4"> </a> <article id="FUNCTION 3D-MATRICES:MAT4"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMAT4">MAT4</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;OPTIONAL ELEMENTS</code><code>)</code>  </header> <div class="docstring"><pre>Constructs a MAT4 from the given elements.

ELEMENTS can be
  NULL     --- The matrix is initialised with zeroes.
  REAL     --- The matrix is initialised with this number.
  SEQUENCE --- The sequence is mapped into the matrix
               and the rest are initialised to 0.</pre></div> </article> </li><li> <a name="3D-MATRICES:MAT4-P"> </a> <article id="FUNCTION 3D-MATRICES:MAT4-P"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMAT4-P">MAT4-P</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <div class="docstring"><pre>Returns T if the given object is of type MAT4.</pre></div> </article> </li><li> <a name="3D-MATRICES:MATF"> </a> <article id="FUNCTION 3D-MATRICES:MATF"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMATF">MATF</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Maps the VALs into the matrix.

The values will be mapped in row-major order.</pre></div> </article> </li><li> <a name="3D-MATRICES:MATN"> </a> <article id="FUNCTION 3D-MATRICES:MATN"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMATN">MATN</a></code></h4> <code class="qualifiers"></code> <code class="arguments">R C &amp;OPTIONAL ELEMENTS</code><code>)</code>  </header> <div class="docstring"><pre>Constructs a MATN of the requested size from the given elements.

ELEMENTS can be
  NULL     --- The matrix is initialised with zeroes.
  REAL     --- The matrix is initialised with this number.
  SEQUENCE --- The sequence is mapped into the matrix
               and the rest are initialised to 0.

Note that if R and C are both...
  2 - A MAT2 is constructed
  3 - A MAT3 is constructed
  4 - A MAT4 is constructed
instead of a MATN.</pre></div> </article> </li><li> <a name="3D-MATRICES:MATN-P"> </a> <article id="FUNCTION 3D-MATRICES:MATN-P"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMATN-P">MATN-P</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <div class="docstring"><pre>Returns T if the given object is of type MATN.</pre></div> </article> </li><li> <a name="3D-MATRICES:MBLOCK"> </a> <article id="FUNCTION 3D-MATRICES:MBLOCK"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMBLOCK">MBLOCK</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M Y1 X1 Y2 X2</code><code>)</code>  </header> <div class="docstring"><pre>Returns the designated sub-matrix as a new matrix.
Y1, X1 are the upper left corner, inclusive
Y2, X2 are the lower right corner, exclusive</pre></div> </article> </li><li> <a name="3D-MATRICES:MBOTTOM"> </a> <article id="FUNCTION 3D-MATRICES:MBOTTOM"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMBOTTOM">MBOTTOM</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M N</code><code>)</code>  </header> <div class="docstring"><pre>Returns the lowermost N rows as a new matrix.</pre></div> </article> </li><li> <a name="3D-MATRICES:MCOF"> </a> <article id="FUNCTION 3D-MATRICES:MCOF"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMCOF">MCOF</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M</code><code>)</code>  </header> <div class="docstring"><pre>Computes the cofactor matrix.

See <a href="#3D-MATRICES:MCOFACTOR">MCOFACTOR</a></pre></div> </article> </li><li> <a name="3D-MATRICES:MCOFACTOR"> </a> <article id="FUNCTION 3D-MATRICES:MCOFACTOR"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMCOFACTOR">MCOFACTOR</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M Y X</code><code>)</code>  </header> <div class="docstring"><pre>Computes the cofactor at the specified index of the matrix.

This is just the element at the position multiplied by the minor.

See <a href="#3D-MATRICES:MMINOR">MMINOR</a></pre></div> </article> </li><li> <a name="3D-MATRICES:MCOLS"> </a> <article id="FUNCTION 3D-MATRICES:MCOLS"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMCOLS">MCOLS</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT</code><code>)</code>  </header> <div class="docstring"><pre>Returns the number of columns the matrix stores.</pre></div> </article> </li><li> <a name="3D-MATRICES:MCOPY"> </a> <article id="FUNCTION 3D-MATRICES:MCOPY"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMCOPY">MCOPY</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M</code><code>)</code>  </header> <div class="docstring"><pre>Creates a full copy of the matrix.

See <a href="#3D-MATRICES:MCOPY2">MCOPY2</a>
See <a href="#3D-MATRICES:MCOPY3">MCOPY3</a>
See <a href="#3D-MATRICES:MCOPY4">MCOPY4</a>
See <a href="#3D-MATRICES:MCOPYN">MCOPYN</a></pre></div> </article> </li><li> <a name="3D-MATRICES:MCOPY2"> </a> <article id="FUNCTION 3D-MATRICES:MCOPY2"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMCOPY2">MCOPY2</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M2</code><code>)</code>  </header> <div class="docstring"><pre>Creates a full copy of the MAT2.</pre></div> </article> </li><li> <a name="3D-MATRICES:MCOPY3"> </a> <article id="FUNCTION 3D-MATRICES:MCOPY3"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMCOPY3">MCOPY3</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M3</code><code>)</code>  </header> <div class="docstring"><pre>Creates a full copy of the MAT3.</pre></div> </article> </li><li> <a name="3D-MATRICES:MCOPY4"> </a> <article id="FUNCTION 3D-MATRICES:MCOPY4"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMCOPY4">MCOPY4</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M4</code><code>)</code>  </header> <div class="docstring"><pre>Creates a full copy of the MAT4.</pre></div> </article> </li><li> <a name="3D-MATRICES:MCOPYN"> </a> <article id="FUNCTION 3D-MATRICES:MCOPYN"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMCOPYN">MCOPYN</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MN</code><code>)</code>  </header> <div class="docstring"><pre>Creates a full copy of the MATN.</pre></div> </article> </li><li> <a name="3D-MATRICES:MCREF"> </a> <article id="FUNCTION 3D-MATRICES:MCREF"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMCREF">MCREF</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT Y X</code><code>)</code>  </header> <div class="docstring"><pre>Returns the element at the given cell in the matrix.

See <a href="#3D-MATRICES:MCREF2">MCREF2</a>
See <a href="#3D-MATRICES:MCREF3">MCREF3</a>
See <a href="#3D-MATRICES:MCREF4">MCREF4</a>
See <a href="#3D-MATRICES:MCREFN">MCREFN</a></pre></div> </article> </li><li> <a name="3D-MATRICES:MCREF2"> </a> <article id="FUNCTION 3D-MATRICES:MCREF2"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMCREF2">MCREF2</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT Y X</code><code>)</code>  </header> <div class="docstring"><pre>Returns the element at the given cell in the MAT2.</pre></div> </article> </li><li> <a name="3D-MATRICES:MCREF3"> </a> <article id="FUNCTION 3D-MATRICES:MCREF3"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMCREF3">MCREF3</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT Y X</code><code>)</code>  </header> <div class="docstring"><pre>Returns the element at the given cell in the MAT3.</pre></div> </article> </li><li> <a name="3D-MATRICES:MCREF4"> </a> <article id="FUNCTION 3D-MATRICES:MCREF4"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMCREF4">MCREF4</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT Y X</code><code>)</code>  </header> <div class="docstring"><pre>Returns the element at the given cell in the MAT4.</pre></div> </article> </li><li> <a name="3D-MATRICES:MCREFN"> </a> <article id="FUNCTION 3D-MATRICES:MCREFN"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMCREFN">MCREFN</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT Y X</code><code>)</code>  </header> <div class="docstring"><pre>Returns the element at the given cell in the MATN.</pre></div> </article> </li><li> <a name="3D-MATRICES:MDET"> </a> <article id="FUNCTION 3D-MATRICES:MDET"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMDET">MDET</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M</code><code>)</code>  </header> <div class="docstring"><pre>Computes the determinant of the matrix.

For MAT2 MAT3 MAT4, inlined variants exist. For MATN, an algorithm based on LU factorisation is used.</pre></div> </article> </li><li> <a name="3D-MATRICES:MDIAG"> </a> <article id="FUNCTION 3D-MATRICES:MDIAG"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMDIAG">MDIAG</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M</code><code>)</code>  </header> <div class="docstring"><pre>Returns the diagonal values of the matrix as a list.</pre></div> </article> </li><li> <a name="3D-MATRICES:MEIGEN"> </a> <article id="FUNCTION 3D-MATRICES:MEIGEN"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMEIGEN">MEIGEN</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M &amp;OPTIONAL (ITERATIONS 50)</code><code>)</code>  </header> <div class="docstring"><pre>Computes an approximation of the eigenvalues of the matrix.

An approach based on QR factorisation is used. The number of iterations dictates
how many times the factorisation is repeated to make the result more accurate.
Usually something around 50 iterations should give somewhat accurate results, but
due to floating point limitations that may be off more significantly.

Returns the eigenvalues as a list.</pre></div> </article> </li><li> <a name="3D-MATRICES:MEYE"> </a> <article id="FUNCTION 3D-MATRICES:MEYE"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMEYE">MEYE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">N</code><code>)</code>  </header> <div class="docstring"><pre>Constructs a square identity matrix of the requested size.</pre></div> </article> </li><li> <a name="3D-MATRICES:MFRUSTUM"> </a> <article id="FUNCTION 3D-MATRICES:MFRUSTUM"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMFRUSTUM">MFRUSTUM</a></code></h4> <code class="qualifiers"></code> <code class="arguments">LEFT RIGHT BOTTOM TOP NEAR FAR</code><code>)</code>  </header> <div class="docstring"><pre>Returns a 3D frustum projection view matrix.

See <a href="#3D-MATRICES:MPERSPECTIVE">MPERSPECTIVE</a></pre></div> </article> </li><li> <a name="3D-MATRICES:MINORM"> </a> <article id="FUNCTION 3D-MATRICES:MINORM"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMINORM">MINORM</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M</code><code>)</code>  </header> <div class="docstring"><pre>Computes the infinity norm of the matrix, namely the maximum of the sums of the rows.</pre></div> </article> </li><li> <a name="3D-MATRICES:MINV"> </a> <article id="FUNCTION 3D-MATRICES:MINV"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMINV">MINV</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M</code><code>)</code>  </header> <div class="docstring"><pre>Computes the inverses of the matrix.

This is only possible if the determinant is non-zero.

For MAT2 MAT3 MAT4, inlined variants exist. For MATN, an algorithm based on the adjugate is used.</pre></div> </article> </li><li> <a name="3D-MATRICES:MIREF"> </a> <article id="FUNCTION 3D-MATRICES:MIREF"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMIREF">MIREF</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT I</code><code>)</code>  </header> <div class="docstring"><pre>Returns the element at the given index in the matrix.

Elements are stored in row-major format.

See <a href="#3D-MATRICES:MIREF2">MIREF2</a>
See <a href="#3D-MATRICES:MIREF3">MIREF3</a>
See <a href="#3D-MATRICES:MIREF4">MIREF4</a>
See <a href="#3D-MATRICES:MIREFN">MIREFN</a></pre></div> </article> </li><li> <a name="3D-MATRICES:MIREF2"> </a> <article id="FUNCTION 3D-MATRICES:MIREF2"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMIREF2">MIREF2</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT I</code><code>)</code>  </header> <div class="docstring"><pre>Returns the element at the given index in the MAT2.

Elements are stored in row-major format.</pre></div> </article> </li><li> <a name="3D-MATRICES:MIREF3"> </a> <article id="FUNCTION 3D-MATRICES:MIREF3"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMIREF3">MIREF3</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT I</code><code>)</code>  </header> <div class="docstring"><pre>Returns the element at the given index in the MAT3.

Elements are stored in row-major format.</pre></div> </article> </li><li> <a name="3D-MATRICES:MIREF4"> </a> <article id="FUNCTION 3D-MATRICES:MIREF4"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMIREF4">MIREF4</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT I</code><code>)</code>  </header> <div class="docstring"><pre>Returns the element at the given index in the MAT4.

Elements are stored in row-major format.</pre></div> </article> </li><li> <a name="3D-MATRICES:MIREFN"> </a> <article id="FUNCTION 3D-MATRICES:MIREFN"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMIREFN">MIREFN</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT I</code><code>)</code>  </header> <div class="docstring"><pre>Returns the element at the given index in the MATN.

Elements are stored in row-major format.</pre></div> </article> </li><li> <a name="3D-MATRICES:MLEFT"> </a> <article id="FUNCTION 3D-MATRICES:MLEFT"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMLEFT">MLEFT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M N</code><code>)</code>  </header> <div class="docstring"><pre>Returns the leftmost N columns as a new matrix.</pre></div> </article> </li><li> <a name="3D-MATRICES:MLOOKAT"> </a> <article id="FUNCTION 3D-MATRICES:MLOOKAT"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMLOOKAT">MLOOKAT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">EYE TARGET UP</code><code>)</code>  </header> <div class="docstring"><pre>Returns a view translation matrix that should &quot;look at&quot; TARGET from EYE where UP is the up vector.</pre></div> </article> </li><li> <a name="3D-MATRICES:MLU"> </a> <article id="FUNCTION 3D-MATRICES:MLU"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMLU">MLU</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M &amp;OPTIONAL (PIVOT T)</code><code>)</code>  </header> <div class="docstring"><pre>Computes an LU factorisation of the matrix.

An approach based on Crout is used with on-the-fly pivotisation if requested.

Returns the combined LU matrix, the permutation matrix, and the number of permutations that were done.</pre></div> </article> </li><li> <a name="3D-MATRICES:MMINOR"> </a> <article id="FUNCTION 3D-MATRICES:MMINOR"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMMINOR">MMINOR</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M Y X</code><code>)</code>  </header> <div class="docstring"><pre>Computes the minor at the specified index of the matrix.

This basically calculates the determinant of the matrix with the row and
column of the specified index excluded.</pre></div> </article> </li><li> <a name="3D-MATRICES:MORTHO"> </a> <article id="FUNCTION 3D-MATRICES:MORTHO"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMORTHO">MORTHO</a></code></h4> <code class="qualifiers"></code> <code class="arguments">LEFT RIGHT BOTTOM TOP NEAR FAR</code><code>)</code>  </header> <div class="docstring"><pre>Returns a 3D orthographic projection view matrix.</pre></div> </article> </li><li> <a name="3D-MATRICES:MPERSPECTIVE"> </a> <article id="FUNCTION 3D-MATRICES:MPERSPECTIVE"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMPERSPECTIVE">MPERSPECTIVE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">FOVY ASPECT NEAR FAR</code><code>)</code>  </header> <div class="docstring"><pre>Returns a 3D perspective projection view matrix.

FOVY       -- The field of view (how &quot;zoomy&quot; it is)
ASPECT     -- The aspect ratio of the screen
NEAR / FAR -- The Z near and far clipping planes

See <a href="#3D-MATRICES:MFRUSTUM">MFRUSTUM</a></pre></div> </article> </li><li> <a name="3D-MATRICES:MPIVOT"> </a> <article id="FUNCTION 3D-MATRICES:MPIVOT"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMPIVOT">MPIVOT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M</code><code>)</code>  </header> <div class="docstring"><pre>Attempts to do a partial pivotisation.

Returns the pivotised matrix, the permutation matrix, and the number of permutations that were done.</pre></div> </article> </li><li> <a name="3D-MATRICES:MQR"> </a> <article id="FUNCTION 3D-MATRICES:MQR"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMQR">MQR</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT</code><code>)</code>  </header> <div class="docstring"><pre>Computes the QR factorisation of the matrix.

An approach based on givens rotations is used.

Returns the Q and R matrices, which are fresh.</pre></div> </article> </li><li> <a name="3D-MATRICES:MRAND"> </a> <article id="FUNCTION 3D-MATRICES:MRAND"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMRAND">MRAND</a></code></h4> <code class="qualifiers"></code> <code class="arguments">R C &amp;KEY (MIN 0) (MAX 1)</code><code>)</code>  </header> <div class="docstring"><pre>Constructs a matrix of the requested size where each element is randomized.

MIN and MAX return the inclusive bounds of the numbers in the matrix.</pre></div> </article> </li><li> <a name="3D-MATRICES:MRIGHT"> </a> <article id="FUNCTION 3D-MATRICES:MRIGHT"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMRIGHT">MRIGHT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M N</code><code>)</code>  </header> <div class="docstring"><pre>Returns the rightmost N columns as a new matrix.</pre></div> </article> </li><li> <a name="3D-MATRICES:MROTATION"> </a> <article id="FUNCTION 3D-MATRICES:MROTATION"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMROTATION">MROTATION</a></code></h4> <code class="qualifiers"></code> <code class="arguments">V ANGLE</code><code>)</code>  </header> <div class="docstring"><pre>Returns a 3D rotation matrix for the given vector as a MAT4.</pre></div> </article> </li><li> <a name="3D-MATRICES:MROWS"> </a> <article id="FUNCTION 3D-MATRICES:MROWS"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMROWS">MROWS</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MAT</code><code>)</code>  </header> <div class="docstring"><pre>Returns the number of rows the matrix stores.</pre></div> </article> </li><li> <a name="3D-MATRICES:MSCALING"> </a> <article id="FUNCTION 3D-MATRICES:MSCALING"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMSCALING">MSCALING</a></code></h4> <code class="qualifiers"></code> <code class="arguments">V</code><code>)</code>  </header> <div class="docstring"><pre>Returns a 3D scaling matrix for the given vector as a MAT4.</pre></div> </article> </li><li> <a name="3D-MATRICES:MTOP"> </a> <article id="FUNCTION 3D-MATRICES:MTOP"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMTOP">MTOP</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M N</code><code>)</code>  </header> <div class="docstring"><pre>Returns the topmost N rows as a new matrix.</pre></div> </article> </li><li> <a name="3D-MATRICES:MTRACE"> </a> <article id="FUNCTION 3D-MATRICES:MTRACE"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMTRACE">MTRACE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M</code><code>)</code>  </header> <div class="docstring"><pre>Computes the trace of the matrix.

For MAT2 MAT3 MAT4, inlined variants exist. For MATN, a generic sum is used.</pre></div> </article> </li><li> <a name="3D-MATRICES:MTRANSLATION"> </a> <article id="FUNCTION 3D-MATRICES:MTRANSLATION"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMTRANSLATION">MTRANSLATION</a></code></h4> <code class="qualifiers"></code> <code class="arguments">V</code><code>)</code>  </header> <div class="docstring"><pre>Returns a 3D translation matrix for the given vector as a MAT4.</pre></div> </article> </li><li> <a name="3D-MATRICES:MTRANSPOSE"> </a> <article id="FUNCTION 3D-MATRICES:MTRANSPOSE"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMTRANSPOSE">MTRANSPOSE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M</code><code>)</code>  </header> <div class="docstring"><pre>Computes the transpose of the matrix.

For MAT2 MAT3 MAT4, inlined variants exist. For MATN, a generic swap is used.</pre></div> </article> </li><li> <a name="3D-MATRICES:MUNIFORM"> </a> <article id="FUNCTION 3D-MATRICES:MUNIFORM"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AMUNIFORM">MUNIFORM</a></code></h4> <code class="qualifiers"></code> <code class="arguments">R C ELEMENT</code><code>)</code>  </header> <div class="docstring"><pre>Constructs a matrix of the requested size where each element is initialised to the requested element.</pre></div> </article> </li><li> <a name="3D-MATRICES:M~="> </a> <article id="FUNCTION 3D-MATRICES:M~="> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AM~%3D">M~=</a></code></h4> <code class="qualifiers"></code> <code class="arguments">VAL &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Compares matrices against each other or a real, returning T if they are element-wise equal by ~=.

See ~=</pre></div> </article> </li><li> <a name="3D-MATRICES:N*M"> </a> <article id="FUNCTION 3D-MATRICES:N*M"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AN%2AM">N*M</a></code></h4> <code class="qualifiers"></code> <code class="arguments">VAL &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Computes a modifying matrix multiplication, but modifying the right-hand side.

See <a href="#3D-MATRICES:NM*">NM*</a></pre></div> </article> </li><li> <a name="3D-MATRICES:NM*"> </a> <article id="FUNCTION 3D-MATRICES:NM*"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3ANM%2A">NM*</a></code></h4> <code class="qualifiers"></code> <code class="arguments">VAL &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Computes a modifying matrix multiplication.

If the other operand is a real, the matrix is multiplied with the real element-wise.
If the other operand is a matrix, they are multiplied as per matrix multiplication.
Note that this only works for square matrix against square matrix, as otherwise a size
change would occur, which is not possible to do in a modifying variant. The two matrices
must agree on the size as per matrix multiplication.
If the other operand is a vector, the vector is modified.

See <a href="#3D-MATRICES:N*M">N*M</a></pre></div> </article> </li><li> <a name="3D-MATRICES:NM+"> </a> <article id="FUNCTION 3D-MATRICES:NM+"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3ANM%2B">NM+</a></code></h4> <code class="qualifiers"></code> <code class="arguments">VAL &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Computes the element-wise addition of the matrices or reals. Returns the first matrix, modified.</pre></div> </article> </li><li> <a name="3D-MATRICES:NM-"> </a> <article id="FUNCTION 3D-MATRICES:NM-"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3ANM-">NM-</a></code></h4> <code class="qualifiers"></code> <code class="arguments">VAL &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Computes the element-wise subtraction of the matrices or reals. Returns the first matrix, modified.</pre></div> </article> </li><li> <a name="3D-MATRICES:NM/"> </a> <article id="FUNCTION 3D-MATRICES:NM/"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3ANM%2F">NM/</a></code></h4> <code class="qualifiers"></code> <code class="arguments">VAL &amp;REST VALS</code><code>)</code>  </header> <div class="docstring"><pre>Computes an element-wise division of the matrix from a real. Returns the modified, first matrix.</pre></div> </article> </li><li> <a name="3D-MATRICES:NMLOOKAT"> </a> <article id="FUNCTION 3D-MATRICES:NMLOOKAT"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3ANMLOOKAT">NMLOOKAT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M EYE TARGET UP</code><code>)</code>  </header> <div class="docstring"><pre>Modifies the matrix to look at TARGET from the EYE.

See MLOOKAT.</pre></div> </article> </li><li> <a name="3D-MATRICES:NMROTATE"> </a> <article id="FUNCTION 3D-MATRICES:NMROTATE"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3ANMROTATE">NMROTATE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M V ANGLE</code><code>)</code>  </header> <div class="docstring"><pre>Rotates the given matrix around the vector by angle. Returns the modified matrix.</pre></div> </article> </li><li> <a name="3D-MATRICES:NMSCALE"> </a> <article id="FUNCTION 3D-MATRICES:NMSCALE"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3ANMSCALE">NMSCALE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M V</code><code>)</code>  </header> <div class="docstring"><pre>Scales the given matrix by the vector. Returns the modified matrix.</pre></div> </article> </li><li> <a name="3D-MATRICES:NMSWAP-COL"> </a> <article id="FUNCTION 3D-MATRICES:NMSWAP-COL"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3ANMSWAP-COL">NMSWAP-COL</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M K L</code><code>)</code>  </header> <div class="docstring"><pre>Modifies the matrix by swapping the Kth column with the Lth column.</pre></div> </article> </li><li> <a name="3D-MATRICES:NMSWAP-ROW"> </a> <article id="FUNCTION 3D-MATRICES:NMSWAP-ROW"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3ANMSWAP-ROW">NMSWAP-ROW</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M K L</code><code>)</code>  </header> <div class="docstring"><pre>Modifies the matrix by swapping the Kth row with the Lth row.</pre></div> </article> </li><li> <a name="3D-MATRICES:NMTRANSLATE"> </a> <article id="FUNCTION 3D-MATRICES:NMTRANSLATE"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3ANMTRANSLATE">NMTRANSLATE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M V</code><code>)</code>  </header> <div class="docstring"><pre>Translates the given matrix by the vector. Returns the modified matrix.</pre></div> </article> </li><li> <a name="3D-MATRICES:WRITE-MATRIX"> </a> <article id="FUNCTION 3D-MATRICES:WRITE-MATRIX"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%203D-MATRICES%3AWRITE-MATRIX">WRITE-MATRIX</a></code></h4> <code class="qualifiers"></code> <code class="arguments">M STREAM &amp;KEY (FORMAT :NICE)</code><code>)</code>  </header> <div class="docstring"><pre>Writes the matrix in a certain format, by default a human-readable one.

FORMAT can be one of
  :NICE    - Prints it in a nice representation intended for humans.
  :WOLFRAM - Prints it in the format for Wolfram Alpha, namely {{a,b..},..}
  :ARRAY   - Prints it as a common lisp 2D array.

If the STREAM is NIL, a string of the output is returned. Otherwise the
matrix itself is returned.</pre></div> </article> </li><li> <a name="3D-MATRICES:WITH-FAST-MATCASE"> </a> <article id="MACRO 3D-MATRICES:WITH-FAST-MATCASE"> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#MACRO%203D-MATRICES%3AWITH-FAST-MATCASE">WITH-FAST-MATCASE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">(ACCESSOR MAT) &amp;BODY BODY</code><code>)</code>  </header> <div class="docstring"><pre>Does an etypecase on MAT and an appropriate WITH-FAST-MATREF on each case.

The body should be an expression of (MAT-TYPE form*). For each
matrix type /except/ for MATN, the forms will be wrapped in an
appropriate WITH-FAST-MATREF. This is not done for MATN, as often
times a different approach to manipulating the matrix than by
direct reference is preferable for that case.

See <a href="#3D-MATRICES:WITH-FAST-MATREF">WITH-FAST-MATREF</a></pre></div> </article> </li><li> <a name="3D-MATRICES:WITH-FAST-MATREF"> </a> <article id="MACRO 3D-MATRICES:WITH-FAST-MATREF"> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#MACRO%203D-MATRICES%3AWITH-FAST-MATREF">WITH-FAST-MATREF</a></code></h4> <code class="qualifiers"></code> <code class="arguments">(ACCESSOR MAT WIDTH) &amp;BODY BODY</code><code>)</code>  </header> <div class="docstring"><pre>Allows efficient referencing to matrix elements.

ACCESSOR designates the name of the local macro that will allow
you to both read and set the matrix element at the given position
It will take either one or two arguments. If two, they are row and
column of the cell to dereference, and if one, it is the row-major
index of the element to dereference.

You must also designate the proper number of columns stored in the
matrix. This is done because often times when you will want to use
this macro, you'll already know the number of columns anyway.
Retrieving it again would be wasteful.

You should use this whenever you need to reference elements in a loop
or need to do more than one reference overall.</pre></div> </article> </li><li> <a name="3D-MATRICES:WITH-FAST-MATREFS"> </a> <article id="MACRO 3D-MATRICES:WITH-FAST-MATREFS"> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#MACRO%203D-MATRICES%3AWITH-FAST-MATREFS">WITH-FAST-MATREFS</a></code></h4> <code class="qualifiers"></code> <code class="arguments">BINDINGS &amp;BODY BODY</code><code>)</code>  </header> <div class="docstring"><pre>Allows efficient referencing of multiple matrices.

Each binding must be of the form that WITH-FAST-MATREF expects.

See <a href="#3D-MATRICES:WITH-FAST-MATREF">WITH-FAST-MATREF</a></pre></div> </article> </li></ul> </li></ul> </article>  </main> </body> </html> 